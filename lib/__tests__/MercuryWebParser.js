"use strict";var _nock=_interopRequireDefault(require("nock"));var _MercuryWebParser=_interopRequireDefault(require("../MercuryWebParser"));var _response=_interopRequireDefault(require("../__mocks__/response.json"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var url="https://medium.com/@addyosmani/progressive-web-apps-with-react-js-part-2-page-load-performance-33b932d97cf2";var key="NeBIXVwRCXVIS3lJC74dsRAMBOaIK6H5EEkFudvs";describe("Mercury Web Parser",function(){it("Should throw error if you do not pass key",function(){expect(function(){new _MercuryWebParser.default;// eslint-disable-line
}).toThrow()});it("Should return parsed page on getting single page",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var parser,page;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:(0,_nock.default)(/[.]+/).get("/parser").query({url:url}).reply(200,_response.default);parser=new _MercuryWebParser.default(key);_context.next=4;return parser.get(url);case 4:page=_context.sent;expect(page).toEqual(_response.default);case 6:case"end":return _context.stop();}}},_callee,this)})));it("Should throw ErrorServerResponse if server fail on getting single page",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(){var parser;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:(0,_nock.default)(/[.]+/).get("/parser").query({url:url}).reply(500);_context2.prev=1;parser=new _MercuryWebParser.default(key);_context2.next=5;return parser.get(url);case 5:_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](1);expect(_context2.t0.name).toEqual("Server Response");case 10:case"end":return _context2.stop();}}},_callee2,this,[[1,7]])})));it("Should return parsed pages array on getting all pages",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee3(){var parser,page;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:(0,_nock.default)(/[.]+/).get("/parser").query({url:url}).reply(200,_response.default);parser=new _MercuryWebParser.default(key);_context3.next=4;return parser.getAll(url);case 4:page=_context3.sent;expect(page).toEqual([_response.default]);case 6:case"end":return _context3.stop();}}},_callee3,this)})));it("Should throw ErrorServerResponse if server fail on getting all pages",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee4(){var parser;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:(0,_nock.default)(/[.]+/).get("/parser").query({url:url}).reply(500);_context4.prev=1;parser=new _MercuryWebParser.default(key);_context4.next=5;return parser.getAll(url);case 5:_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4["catch"](1);expect(_context4.t0.name).toEqual("Server Response");case 10:case"end":return _context4.stop();}}},_callee4,this,[[1,7]])})))});
//# sourceMappingURL=MercuryWebParser.js.map